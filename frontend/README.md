# StreamGuard Frontend

A decentralized live streaming platform built on Sui blockchain with Walrus storage integration.

## 🚀 Quick Start

### Prerequisites

- Node.js 18+ or Bun
- Docker (for RTMP server)
- A Sui wallet (Sui Wallet browser extension recommended)

### 1. Install Dependencies

```bash
# Using npm
npm install

# Using bun (recommended)
bun install
```

### 2. Set Up Environment

```bash
# Copy environment template
cp .env.example .env

# Edit .env with your configuration
```

### 3. Start RTMP Server

```bash
# Quick setup with our script
./setup-rtmp.sh

# Or manually with Docker
docker run --rm -it -p 1935:1935 -p 8080:8080 ossrs/srs:5
```

### 4. Start Development Server

```bash
# Using npm
npm run dev

# Using bun
bun dev
```

Visit `http://localhost:5173` to access StreamGuard!

## 📋 Environment Variables

Create a `.env` file in the frontend directory:

```env
# Walrus Configuration
VITE_WALRUS_PUBLISHER_URL=https://publisher.walrus-testnet.walrus.space
VITE_WALRUS_AGGREGATOR_URL=https://aggregator.walrus-testnet.walrus.space

# RTMP Server Configuration
VITE_RTMP_SERVER_URL=rtmp://localhost:1935/live
VITE_RTMP_SERVER_HOST=localhost
VITE_RTMP_SERVER_PORT=1935

# Sui Network Configuration
VITE_SUI_NETWORK=testnet
VITE_SUI_RPC_URL=https://fullnode.testnet.sui.io:443
```

## 🎬 How to Stream

### For Creators

1. **Connect Wallet**: Click "Connect Wallet" and connect your Sui wallet
2. **Create Stream**: Click "Go Live" and fill out the stream details
3. **Get Credentials**: Copy the RTMP URL and Stream Key
4. **Configure OBS**:
   - Service: Custom
   - Server: `rtmp://localhost:1935/live`
   - Stream Key: [Your generated key]
5. **Start Streaming**: Click "Start Streaming" in OBS

### For Viewers

1. **Browse Streams**: Visit the homepage to see live streams
2. **Watch**: Click on any stream to start watching
3. **Interact**: Send tips, subscribe, or chat with creators
4. **Support**: Tip creators with SUI tokens

## 🛠️ OBS Studio Configuration

### Recommended Settings

**Stream Settings:**
- Service: Custom
- Server: `rtmp://localhost:1935/live`
- Stream Key: [Generated by StreamGuard]

**Output Settings:**
- Output Mode: Simple
- Video Bitrate: 2500 Kbps (for 1080p)
- Audio Bitrate: 160 Kbps

**Video Settings:**
- Base Resolution: 1920x1080
- Output Resolution: 1920x1080
- FPS: 30

## 🔧 Troubleshooting

### "Failed to connect to server" in OBS

1. **Check RTMP Server**: Ensure the RTMP server is running
   ```bash
   docker ps | grep srs
   ```

2. **Verify Port**: Make sure port 1935 is not blocked
   ```bash
   lsof -i :1935
   ```

3. **Check URL Format**: Ensure RTMP URL is `rtmp://localhost:1935/live`

### Stream Not Appearing as Live

1. **Check Stream Key**: Verify the stream key matches exactly
2. **Check Browser Console**: Look for JavaScript errors
3. **Verify Wallet Connection**: Ensure your Sui wallet is connected

### Transaction Errors

1. **Insufficient Gas**: Make sure you have SUI tokens for gas fees
2. **Network Issues**: Check your internet connection
3. **Contract Deployment**: Verify smart contracts are deployed correctly

### Layout Issues

1. **Clear Browser Cache**: Hard refresh with Ctrl+F5 (Cmd+Shift+R on Mac)
2. **Check Responsive Design**: Test on different screen sizes
3. **Disable Browser Extensions**: Some extensions may interfere with styling

## 🏗️ Development

### Project Structure

```
frontend/
├── src/
│   ├── components/          # Reusable UI components
│   │   ├── ui/             # Base UI components (Radix)
│   │   ├── video/          # Video players
│   │   ├── stream/         # Streaming related components
│   │   └── common/         # Common components
│   ├── pages/              # Page components
│   ├── hooks/              # Custom React hooks
│   ├── stores/             # Zustand stores
│   ├── utils/              # Utility functions
│   ├── types/              # TypeScript type definitions
│   ├── constants/          # Application constants
│   └── lib/                # Third-party library configurations
├── public/                 # Static assets
└── setup-rtmp.sh          # RTMP server setup script
```

### Key Technologies

- **React 18** with TypeScript
- **Vite** for build tooling
- **Tailwind CSS** for styling
- **Radix UI** for accessible components
- **Zustand** for state management
- **Sui dApp Kit** for blockchain integration
- **Video.js** for video playback

### Building for Production

```bash
# Build the application
npm run build

# Preview the build
npm run preview
```

## 🌐 Deployment

### Vercel (Recommended)

1. Connect your GitHub repository to Vercel
2. Set environment variables in Vercel dashboard
3. Deploy automatically on push to main branch

### Manual Deployment

```bash
# Build the application
npm run build

# Deploy the dist/ folder to your hosting provider
```

## 🔗 Smart Contract Integration

The frontend integrates with Sui smart contracts for:

- **Stream Management**: Creating and managing live streams
- **Creator Economy**: Tips, subscriptions, and revenue distribution
- **Content NFTs**: Minting and trading content ownership
- **Moderation**: AI-powered content moderation

### Contract Addresses

Update `src/constants/contracts.ts` with your deployed contract addresses:

```typescript
export const CONTRACTS = {
  PACKAGE_ID: 'your-package-id',
  STREAM_REGISTRY: 'your-stream-registry-id',
  // ... other contract addresses
};
```

## 📚 Additional Resources

- [Sui Documentation](https://docs.sui.io/)
- [Walrus Documentation](https://docs.walrus.space/)
- [OBS Studio Guide](https://obsproject.com/wiki/)
- [RTMP Setup Guide](./RTMP_SETUP.md)

## 🐛 Known Issues

1. **RTMP Server Required**: You need to run a local RTMP server for development
2. **Wallet Connection**: Some wallets may require page refresh after connection
3. **Video Playback**: HLS playback requires proper CORS headers

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## 📄 License

This project is licensed under the MIT License. 